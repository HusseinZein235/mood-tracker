<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Direct OpenRouter API Test</title>
    <style>
        body {
            font-family: sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
            margin: 10px 0;
        }
        #result {
            white-space: pre-wrap;
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
            overflow-x: auto;
        }
        .success {
            border-left: 5px solid green;
        }
        .error {
            border-left: 5px solid red;
        }
    </style>
</head>
<body>
    <h1>Direct OpenRouter API Test</h1>
    <p>This page makes a direct minimal API call to OpenRouter.</p>
    
    <button id="testButton">Run Direct Test</button>
    <div>Status: <span id="status">Ready</span></div>
    
    <h2>API Response:</h2>
    <pre id="result">Click the button to see results...</pre>
    
    <script>
        document.getElementById('testButton').addEventListener('click', async function() {
            const resultEl = document.getElementById('result');
            const statusEl = document.getElementById('status');
            
            statusEl.textContent = 'Sending request...';
            resultEl.textContent = 'Making API request...';
            
            try {
                // Absolutely minimal request based on the official documentation
                const response = await fetch("https://openrouter.ai/api/v1/chat/completions", {
                    method: "POST",
                    headers: {
                        "Authorization": "Bearer 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",
                        "Content-Type": "application/json",
                        "HTTP-Referer": window.location.origin,
                        "X-Title": "nvidia/llama-3.3-nemotron-super-49b-v1:free"
                    },
                    body: JSON.stringify({
                        "model": "nvidia/llama-3.3-nemotron-super-49b-v1:free",
                        "messages": [
                            { "role": "user", "content": "Say hello world in Arabic" }
                        ]
                    })
                });
                
                statusEl.textContent = `Response status: ${response.status}`;
                
                const rawText = await response.text();
                
                try {
                    // Try to parse as JSON
                    const data = JSON.parse(rawText);
                    resultEl.textContent = JSON.stringify(data, null, 2);
                    resultEl.className = 'success';
                    
                    if (data.choices && data.choices.length > 0) {
                        statusEl.textContent = 'Success! Response received.';
                    } else {
                        statusEl.textContent = 'API returned successfully but no choices in the response.';
                    }
                } catch (parseError) {
                    resultEl.textContent = `Failed to parse JSON: ${parseError.message}\n\nRaw response:\n${rawText}`;
                    resultEl.className = 'error';
                }
            } catch (error) {
                statusEl.textContent = `Error: ${error.message}`;
                resultEl.textContent = `Request failed: ${error.message}`;
                resultEl.className = 'error';
            }
        });
    </script>
</body>
</html> 